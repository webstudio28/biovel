---
layout: base.njk
pagination:
    data: products
    size: 1
    alias: product
permalink: "/produkti/{{ product.meta_title }}/"
eleventyComputed:
    title: "{{ product.title }}"
    description: "{{ product.short_description }}"
---

<section class="py-6 bg-primary-sand/30">
    <div class="max-w-7xl w-full mx-auto px-4">
        <!-- Title Container - Above images on mobile/tablet -->
        <div class="mb-2 md:hidden">
            <h1 class="text-xl text-center md:text-3xl font-bold text-primary-evergreen">{{ product.title }}</h1>
        </div>
        
        <div class="flex flex-col md:flex-row gap-8 md:gap-12 md:items-stretch">
            
            <!-- Product Images Carousel Container -->
            <div class="w-full md:w-1/2 md:flex md:flex-col md:order-1">
                <div class="flex flex-col gap-4 justify-center items-center md:h-full">
                    <!-- Main Image -->
                    {% if product.images and product.images.length > 0 %}
                        <div class="bg-white rounded-2xl shadow-md aspect-square overflow-hidden w-full h-full ">
                            <img id="product-main-image" src="{{ product.images[0] }}" alt="{{ product.title }}" class="w-full h-full object-cover transition-opacity duration-300">
                        </div>
                        
                        <!-- Thumbnails -->
                        {% if product.images.length > 1 %}
                            <div class="flex gap-3 overflow-x-auto pb-2 justify-center">
                                {% for image in product.images %}
                                    {% if image %}
                                        <button class="product-thumbnail flex-shrink-0 w-20 h-20 opacity-60 hover:opacity-100 rounded-lg overflow-hidden transition-opacity cursor-pointer border-0 outline-none" data-image-src="{{ image }}">
                                            <img src="{{ image }}" alt="{{ product.title }} thumbnail {{ loop.index }}" class="w-full h-full object-cover">
                                        </button>
                                    {% endif %}
                                {% endfor %}
                            </div>
                        {% endif %}
                    {% endif %}
                </div>
            </div>

            <!-- Product Info Container -->
            <div class="w-full md:w-1/2 md:h-[100%] flex flex-col gap-8 md:order-2">
                <!-- Title Container - Hidden on mobile/tablet, shown on desktop -->
                <div class="w-full hidden md:block">
                    <h1 class="text-xl md:text-3xl font-bold text-primary-evergreen">{{ product.title }}</h1>
                </div>
                
                <!-- Package Container -->
                {% if product.package %}
                    <div class="bg-white/40 rounded-2xl p-4">
                        <h3 class="text-lg font-semibold text-primary-evergreen mb-2">Опаковка</h3>
                        <p class="text-primary-volcanic">{{ product.package }}</p>
                    </div>
                {% endif %}
                
                <!-- Sustavki (Ingredients) Container -->
                {% if product.sustavki and product.sustavki.length > 0 %}
                    <div class="bg-white/40 rounded-2xl p-4">
                        <h3 class="text-lg font-semibold text-primary-evergreen mb-2">Съставки</h3>
                        <div class="text-primary-volcanic space-y-1">
                            {% for sustavka in product.sustavki %}
                                <p>- {{ sustavka }}</p>
                            {% endfor %}
                        </div>
                    </div>
                {% endif %}
                
                <!-- Benefits Container -->
                {% if product.benefits and product.benefits.length > 0 %}
                    <div class="bg-white/40 rounded-2xl p-4 ">
                        <h3 class="text-lg font-semibold text-primary-evergreen mb-4">Ползи</h3>
                        <div class="flex flex-wrap gap-2">
                            {% for benefit in product.benefits %}
                                <div class="flex items-center gap-2 bg-white/80 rounded-full px-3 py-1.5">
                                    <img src="{{ benefit.benefit_icon }}" alt="{{ benefit.benefit_name }}" class="w-4 h-4 object-contain flex-shrink-0">
                                    <span class="text-primary-volcanic text-sm">{{ benefit.benefit_name }}</span>
                                </div>
                            {% endfor %}
                        </div>
                    </div>
                {% endif %}
                
                <!-- Buy Now Button -->
                <a href="/contact" class="bg-green-700 hover:bg-green-800 text-white w-full text-center rounded-2xl py-3 font-semibold transition-colors">
                    Намери в аптека
                </a>
            </div>
        </div>
    </div>
</section>

<!-- Описание Section -->
{% if product.long_description %}
<section class="py-6 mt-6 bg-primary-sand/30">
    <div class="max-w-7xl w-full mx-auto px-4">
        <h2 class="text-2xl md:text-3xl font-bold text-primary-evergreen mb-6 flex items-center gap-3">
            <img src="/assets/images/description.png" alt="Описание" class="w-8 h-8 object-contain">
            <span>Описание</span>
        </h2>
        <div class="bg-white/60 rounded-2xl p-6 md:p-8">
            <div class="prose prose-lg max-w-none">
                <p class="text-primary-deepsea leading-relaxed text-base md:text-lg">
                    {{ product.long_description }}
                </p>
            </div>
        </div>
    </div>
</section>
{% endif %}

{% if product.used_for or product.how_to_use %}
<section class="py-6 bg-primary-sand/30">
    <div class="max-w-7xl w-full mx-auto px-4">
        <h2 class="text-2xl md:text-3xl font-bold text-primary-evergreen mb-6 flex items-center gap-3">
            <img src="/assets/images/how-use.png" alt="Как да използваме" class="w-8 h-8 object-contain">
            <span>Как да използваме</span>
        </h2>
        <div class="bg-white/50 rounded-2xl p-6 md:p-8 space-y-3 shadow-sm">
            {% if product.used_for %}
                <div class="space-y-1">
                    <h3 class="text-lg font-semibold text-primary-evergreen">За какво помага</h3>
                    <p class="text-primary-deepsea text-base md:text-lg leading-relaxed">{{ product.used_for }}</p>
                </div>
            {% endif %}
            {% if product.how_to_use %}
                <div class="space-y-1">
                    <h3 class="text-lg font-semibold text-primary-evergreen">Начин на употреба</h3>
                    <p class="text-primary-deepsea text-base md:text-lg leading-relaxed">{{ product.how_to_use }}</p>
                </div>
            {% endif %}
        </div>
    </div>
</section>
{% endif %}

{% if product.dosage or product.contraindications or product.storage %}
<section class="py-6 bg-primary-sand/30">
    <div class="max-w-7xl w-full mx-auto px-4">
        <h2 class="text-2xl md:text-3xl font-bold text-primary-evergreen mb-6 flex items-center gap-3">
            <img src="/assets/images/important.png" alt="Важна информация" class="w-8 h-8 object-contain">
            <span>Важна информация</span>
        </h2>
        <div class="bg-white/50 rounded-2xl p-6 md:p-8 space-y-3 shadow-sm">
            {% if product.dosage %}
                <div class="space-y-1">
                    <h3 class="text-lg font-semibold text-primary-evergreen">Дозировка</h3>
                    <p class="text-primary-deepsea text-base md:text-lg leading-relaxed">{{ product.dosage }}</p>
                </div>
            {% endif %}
            {% if product.contraindications %}
                <div class="space-y-1">
                    <h3 class="text-lg font-semibold text-primary-evergreen">Противопоказания</h3>
                    <p class="text-primary-deepsea text-base md:text-lg leading-relaxed">{{ product.contraindications }}</p>
                </div>
            {% endif %}
            {% if product.storage %}
                <div class="space-y-1">
                    <h3 class="text-lg font-semibold text-primary-evergreen">Съхранение</h3>
                    <p class="text-primary-deepsea text-base md:text-lg leading-relaxed">{{ product.storage }}</p>
                </div>
            {% endif %}
        </div>
    </div>
</section>
{% endif %}

<script src="{{ '/assets/js/product-carousel.js' | url }}"></script>
